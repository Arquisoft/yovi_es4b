ifndef::imagesdir[:imagesdir: ../images]

[[section-deployment-view]]


== Deployment View

ifdef::arc42help[]
[role="arc42help"]
****
.Content
The deployment view describes:

 1. technical infrastructure used to execute your system, with infrastructure elements like geographical locations, environments, computers, processors, channels and net topologies as well as other infrastructure elements and

2. mapping of (software) building blocks to that infrastructure elements.

Often systems are executed in different environments, e.g. development environment, test environment, production environment. In such cases you should document all relevant environments.

Especially document a deployment view if your software is executed as distributed system with more than one computer, processor, server or container or when you design and construct your own hardware processors and chips.

From a software perspective it is sufficient to capture only those elements of an infrastructure that are needed to show a deployment of your building blocks. Hardware architects can go beyond that and describe an infrastructure to any level of detail they need to capture.

.Motivation
Software does not run without hardware.
This underlying infrastructure can and will influence a system and/or some
cross-cutting concepts. Therefore, there is a need to know the infrastructure.

.Form

Maybe a highest level deployment diagram is already contained in section 3.2. as
technical context with your own infrastructure as ONE black box. In this section one can
zoom into this black box using additional deployment diagrams:

* UML offers deployment diagrams to express that view. Use it, probably with nested diagrams,
when your infrastructure is more complex.
* When your (hardware) stakeholders prefer other kinds of diagrams rather than a deployment diagram, let them use any kind that is able to show nodes and channels of the infrastructure.


.Further Information

See https://docs.arc42.org/section-7/[Deployment View] in the arc42 documentation.

****
endif::arc42help[]

=== Infrastructure Level 1

ifdef::arc42help[]
[role="arc42help"]
****
Describe (usually in a combination of diagrams, tables, and text):

* distribution of a system to multiple locations, environments, computers, processors, .., as well as physical connections between them
* important justifications or motivations for this deployment structure
* quality and/or performance features of this infrastructure
* mapping of software artifacts to elements of this infrastructure

For multiple environments or alternative deployments please copy and adapt this section of arc42 for all relevant environments.
****
endif::arc42help[]

The system is deployed as a distributed, container-based architecture.
It consists of independent services communicating over HTTP and running within isolated container environments.

The deployment view describes the technical infrastructure required to execute the system and the mapping of software building blocks to infrastructure elements.

The following diagram shows the high-level deployment structure in a local environment using containerization.
_**<Overview Diagram>**_
@startuml
node "User Device" {
  component "Web Browser"
}

node "Docker Host" {

  node "Docker Network" {

    node "Webapp Container\n(React + Vite)" {
      component "SPA Frontend"
    }

    node "Users Service Container\n(Node.js + Express)" {
      component "Users REST API"
    }

    node "Gamey Container\n(Rust Engine)" {
      component "Game Engine API"
    }

    node "Database Container" {
      database "User Database"
    }

  }
}

"Web Browser" --> "SPA Frontend" : HTTP
"SPA Frontend" --> "Users REST API" : HTTP /createuser
"SPA Frontend" --> "Game Engine API" : HTTP
"Users REST API" --> "User Database" : DB connection

@enduml

Motivation::

The deployment structure is based on containerized services to ensure:

 - Clear separation between frontend, backend, and game engine.

 - Independent deployment and scalability of each service.

 - Reproducible development environments.

 - Isolation of runtime dependencies.

A database component has been introduced to persist user data, enabling real user registration and long-term storage.


Quality and/or Performance Features::

- Scalability: Services can be scaled independently in future production environments.

- Isolation: Each component runs in its own container.

- Loose Coupling: Communication occurs via well-defined HTTP APIs.

- Persistence: User data is stored in a dedicated database component.

- Portability: The system can run on any infrastructure supporting containerization.

- Maintainability: Clear separation of concerns reduces system complexity.

Mapping of Building Blocks to Infrastructure::

| Building Block         | Infrastructure Element                       |
| ---------------------- | -------------------------------------------- |
| React SPA (Webapp)     | Webapp Container                             |
| User Management Logic  | Users Service Container                      |
| User Persistence Layer | Database Container                           |
| Game Core & Bots       | Gamey Container                              |
| Client Interface       | Web Browser                                  |
| Communication          | Docker Internal Network (HTTP + DB protocol) |



=== Infrastructure Level 2

ifdef::arc42help[]
[role="arc42help"]
****
Here you can include the internal structure of (some) infrastructure elements from level 1.

Please copy the structure from level 1 for each selected element.
****
endif::arc42help[]

This level provides a more detailed view of selected infrastructure elements.

==== _<Webapp Container>_


@startuml
node "Webapp Container" {
  component "React SPA"
  component "UI Components"
  component "API Client Module"
}

node "External Services" {
  component "Users REST API"
  component "Game Engine API"
}

"React SPA" --> "UI Components"
"React SPA" --> "API Client Module"
"API Client Module" --> "Users REST API" : HTTP
"API Client Module" --> "Game Engine API" : HTTP

@enduml

The Webapp container:

 - Hosts a Single Page Application built with React.

 - Handles all user interactions.

 - Communicates with backend services via HTTP.

 - Does not maintain persistent state.

 - Acts as the primary system entry point.

==== _<Users Service Container>_

@startuml
node "Users Service Container" {
  component "Express Server"
  component "User Controller"
  component "User Service"
  component "Persistence Layer"
}

node "Database Container" {
  database "User Database"
}

"Express Server" --> "User Controller"
"User Controller" --> "User Service"
"User Service" --> "Persistence Layer"
"Persistence Layer" --> "User Database"

@enduml
The Users Service container:

 - Exposes REST endpoints (e.g., /createuser).

 - Implements business logic for user registration.

 - Contains a persistence layer responsible for storing user data.

 - Connects to an external database container.

 - Ensures separation between API layer, business logic, and data access.



==== _<Gamey Container>_

@startuml
node "Gamey Container" {
  component "Web API"
  component "Game Core"
  component "Bot Engine"
  component "Notation Module"
}

"Web API" --> "Game Core"
"Game Core" --> "Bot Engine"
"Game Core" --> "Notation Module"

@enduml

The Gamey container:

 - Hosts the Rust-based game engine.

 - Encapsulates all core game logic.

 - Provides bot functionality.

 - Exposes a Web API for interaction with the frontend.

 - Does not directly depend on the user database.

Gamey remains logically independent from user management.

==== _<Database Container>_

@startuml
node "Database Container" {
  database "User Database"
}

@enduml

The database container:

 - Stores user registration data persistently.

 - Is accessed exclusively by the Users Service.

 - Is not directly exposed to the frontend or Gamey.

 - Ensures data durability and separation of concerns.